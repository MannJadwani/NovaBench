{
  "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>macOS Desktop Replica</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://code.iconify.design/2/2.0.0-iconify.min.js\"></script>\n    <style>\n        .desktop-wallpaper {\n            background-image: url('https://source.unsplash.com/random/1920x1080?sig=1');\n            background-size: cover;\n            background-position: center;\n        }\n        \n        .dock-container {\n            position: fixed;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            height: 60px;\n            background: rgba(17, 18, 19, 0.9);\n            backdrop-filter: blur(20px);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            z-index: 1000;\n            padding: 10px 20px;\n            gap: 1px;\n        }\n        \n        .dock-item {\n            width: 70px;\n            height: 55px;\n            flex-shrink: 0;\n            background: none;\n            border: none;\n            cursor: pointer;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            transition: all 0.2s ease;\n            padding: 2px;\n        }\n        \n        .dock-item:hover {\n            transform: scale(1.5);\n        }\n        \n        .dock-icon {\n            width: 40px;\n            height: 40px;\n            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n        }\n        \n        .dock-label {\n            font-size: 10px;\n            color: #ffffff;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n            margin-top: 2px;\n            text-align: center;\n            line-height: 12px;\n            font-weight: 500;\n            min-height: 24px;\n        }\n        \n        .window {\n            position: absolute;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);\n            overflow: hidden;\n            min-height: 300px;\n            min-width: 400px;\n            max-width: 100%;\n            max-height: 100%;\n            display: none;\n        }\n        \n        .window.show {\n            display: block;\n        }\n        \n        .window-titlebar {\n            background: linear-gradient(to bottom, #e5e5e5, #d4d4d4);\n            border-bottom: 1px solid #b1b1b1;\n            padding: 6px 12px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            user-select: none;\n        }\n        \n        .window-controls {\n            display: flex;\n            gap: 6px;\n        }\n        \n        .window-control {\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            cursor: pointer;\n            transition: opacity 0.2s;\n        }\n        \n        .window-control:hover {\n            opacity: 0.7;\n        }\n        \n        .window-content {\n            padding: 15px;\n        }\n        \n        .window.modal-resize-handle {\n            position: absolute;\n            bottom: 0;\n            right: 0;\n            width: 20px;\n            height: 20px;\n            background: linear-gradient(to bottom right, transparent, rgba(0, 0, 0, 0.1));\n            cursor: nwse-resize;\n            z-index: 10;\n        }\n        \n        .desktop {\n            position: relative;\n            min-height: 100vh;\n            padding-bottom: 60px;\n        }\n        \n        .menubar {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 24px;\n            background: rgba(17, 18, 19, 0.9);\n            color: white;\n            z-index: 999;\n            display: flex;\n            align-items: center;\n        }\n        \n        .apple-menu {\n            margin-left: 15px;\n        }\n        \n        .menubar-item {\n            padding: 4px 8px;\n            cursor: pointer;\n            font-size: 13px;\n            transition: background-color 0.2s;\n        }\n        \n        .menubar-item:hover {\n            background-color: rgba(255, 255, 255, 0.1);\n        }\n        \n        .clock {\n            margin-left: auto;\n            margin-right: 15px;\n            font-size: 13px;\n        }\n        \n        .menu-dropdown {\n            position: fixed;\n            background: white;\n            border: 1px solid #d1d1d1;\n            box-shadow: 0 3px 20px rgba(0, 0, 0, 0.1);\n            display: none;\n            max-height: 400px;\n            overflow-y: auto;\n            z-index: 1001;\n        }\n        \n        .menu-dropdown.show {\n            display: block;\n        }\n        \n        .menu-item {\n            display: block;\n            padding: 6px 20px;\n            text-decoration: none;\n            color: black;\n            font-size: 13px;\n            white-space: nowrap;\n            cursor: pointer;\n            transition: background-color 0.2s;\n        }\n        \n        .menu-item:hover {\n            background-color: #f0f0f0;\n        }\n        \n        .menu-item.disabled {\n            color: #888;\n            cursor: not-allowed;\n        }\n        \n        .menu-item.disabled:hover {\n            background-color: transparent;\n        }\n        \n        .search-bar {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            width: 600px;\n            max-width: 90%;\n            background: rgba(0, 0, 0, 0.8);\n            backdrop-filter: blur(20px);\n            border-radius: 24px;\n            padding: 12px;\n            display: none;\n            z-index: 1002;\n        }\n        \n        .search-bar.show {\n            display: block;\n        }\n        \n        .search-input {\n            width: 100%;\n            background: transparent;\n            border: none;\n            color: white;\n            font-size: 18px;\n            padding: 10px 20px;\n            outline: none;\n        }\n        \n        .search-input::placeholder {\n            color: rgba(255, 255, 255, 0.6);\n        }\n        \n        .notifications {\n            position: fixed;\n            top: 24px;\n            right: 20px;\n            width: 350px;\n            max-height: 600px;\n            background: white;\n            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);\n            border-radius: 12px;\n            display: none;\n            z-index: 1001;\n        }\n        \n        .notifications.show {\n            display: block;\n        }\n        \n        .notification-header {\n            padding: 15px 20px;\n            border-bottom: 1px solid #e0e0e0;\n        }\n        \n        .notification-list {\n            max-height: 400px;\n            overflow-y: auto;\n        }\n        \n        .notification-item {\n            padding: 15px 20px;\n            border-bottom: 1px solid #f0f0f0;\n            display: flex;\n            align-items: flex-start;\n        }\n        \n        .notification-item:last-child {\n            border-bottom: none;\n        }\n        \n        .desktop-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n            grid-gap: 20px;\n            padding: 20px;\n        }\n        \n        .mission-control {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0, 0, 0, 0.95);\n            display: none;\n            flex-direction: column;\n            z-index: 1003;\n            overflow-y: auto;\n        }\n        \n        .mission-control.show {\n            display: flex;\n        }\n        \n        .desktop-item {\n            border: 2px solid transparent;\n            padding: 10px;\n            cursor: pointer;\n            transition: border-color 0.2s;\n        }\n        \n        .desktop-item.active {\n            border-color: #007aff;\n            background: rgba(0, 122, 255, 0.1);\n        }\n    </style>\n</head>\n<body class=\"bg-gray-800 overflow-hidden select-none\">\n    <div class=\"menubar\">\n        <div class=\"apple-menu\">\n            <div class=\"menubar-item\" id=\"appleMenuBtn\" data-dropdown=\"appleMenu\">ï£¿</div>\n            <div class=\"menu-dropdown\" id=\"appleMenu\">\n                <a href=\"#\" class=\"menu-item\">About This Mac</a>\n                <a href=\"#\" class=\"menu-item\">System Preferences</a>\n                <div class=\"separator\"></div>\n                <a href=\"#\" class=\"menu-item\">Sleep</a>\n                <a href=\"#\" class=\"menu-item\">Restart</a>\n                <a href=\"#\" class=\"menu-item\">Shut Down</a>\n                <div class=\"separator\"></div>\n                <a href=\"#\" class=\"menu-item\">Log Out</a>\n            </div>\n        </div>\n        <div class=\"menubar-item\" id=\"fileMenuBtn\" data-dropdown=\"fileMenu\">File</div>\n        <div class=\"menubar-item\" id=\"editMenuBtn\" data-dropdown=\"editMenu\">Edit</div>\n        <div class=\"menubar-item\" id=\"viewMenuBtn\" data-dropdown=\"viewMenu\">View</div>\n        <div class=\"menubar-item\" id=\"goMenuBtn\" data-dropdown=\"goMenu\">Go</div>\n        <div class=\"menubar-item\" id=\"windowMenuBtn\" data-dropdown=\"windowMenu\">Window</div>\n        <div class=\"menubar-item\" id=\"helpMenuBtn\" data-dropdown=\"helpMenu\">Help</div>\n        <div class=\"clock\">Sun 12:40 PM</div>\n    </div>\n\n    <div class=\"desktop desktop-wallpaper\">\n        <div class=\"search-bar\" id=\"searchBar\">\n            <input type=\"text\" class=\"search-input\" placeholder=\"Search with Spotlight...\" />\n        </div>\n\n        <div class=\"notifications\" id=\"notifications\">\n            <div class=\"notification-header\">\n                <strong>Notifications</strong>\n            </div>\n            <div class=\"notification-list\">\n                <div class=\"notification-item\">\n                    <span class=\"iconify\" data-icon=\"bi:bell\" data-width=\"24\" data-height=\"24\"></span>\n                    <div class=\"ml-3\">\n                        <div><strong>App Update Available</strong></div>\n                        <small class=\"text-sm text-gray-500\">1 minute ago</small>\n                    </div>\n                </div>\n                <div class=\"notification-item\">\n                    <span class=\"iconify\" data-icon=\"bi:wifi\" data-width=\"24\" data-height=\"24\"></span>\n                    <div class=\"ml-3\">\n                        <div><strong>Wi-Fi Connection Restored</strong></div>\n                        <small class=\"text-sm text-gray-500\">5 minutes ago</small>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"missionControl\" class=\"mission-control\">\n            <h3 class=\"text-gray-300 px-6 py-4 font-normal text-lg border-b border-gray-700\">\n                Mission Control\n            </h3>\n            <div class=\"desktop-grid\">\n                <div id=\"desktop1\" class=\"desktop-item\">\n                    <div class=\"text-gray-300\">Desktop 1</div>\n                    <small class=\"text-xs text-gray-500\">Finder, Safari, Mail</small>\n                </div>\n                <div id=\"desktop2\" class=\"desktop-item\">\n                    <div class=\"text-gray-300\">Desktop 2</div>\n                    <small class=\"text-xs text-gray-500\">Terminal, Xcode, TextEdit</small>\n                </div>\n                <div id=\"desktop3\" class=\"desktop-item\">\n                    <div class=\"text-xs text-gray-500\">+</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"dock-container\">\n        <button class=\"dock-item\" id=\"dockFinder\">\n            <span class=\"iconify\" data-icon=\"bi:folder\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Finder</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockSafari\">\n            <span class=\"iconify\" data-icon=\"fa-solid:globe\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Safari</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockMail\">\n            <span class=\"iconify\" data-icon=\"bi:envelope\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Mail</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockMessages\">\n            <span class=\"iconify\" data-icon=\"fluent:message-28-regular\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Messages</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockSystemPrefs\">\n            <span class=\"iconify\" data-icon=\"system:posix-shell\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">System Prefs</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockCalculator\">\n            <span class=\"iconify\" data-icon=\"mdi:calculator\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Calculator</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockNotes\">\n            <span class=\"iconify\" data-icon=\"bi:file-earmark-text\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Notes</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockCalendar\">\n            <span class=\"iconify\" data-icon=\"bi:calendar\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Calendar</div>\n        </button>\n        <button class=\"dock-item\" id=\"dockTerminal\">\n            <span class=\"iconify\" data-icon=\"system:posix-shell\" data-width=\"40\" data-height=\"40\"></span>\n            <div class=\"dock-label\">Terminal</div>\n        </button>\n    </div>\n\n    <div id=\"windowFinder\" class=\"window\" data-window=\"finder\">\n        <div class=\"window-titlebar\">\n            <div class=\"window-controls\">\n                <div class=\"window-control\" style=\"background: #ff5f56\"></div>\n                <div class=\"window-control\" style=\"background: #ffbd2e\"></div>\n                <div class=\"window-control\" style=\"background: #28ca42\"></div>\n            </div>\n            <div style=\"margin-left: 12px;\">Finder</div>\n            <div style=\"flex-grow: 1\"></div>\n        </div>\n        <div class=\"window-content\">\n            <h2>Finder</h2>\n            <p>Your files and folders are here</p>\n        </div>\n        <div class=\"modal-resize-handle\"></div>\n    </div>\n\n    <div id=\"windowSystemPrefs\" class=\"window\" data-window=\"system-prefs\">\n        <div class=\"window-titlebar\">\n            <div class=\"window-controls\">\n                <div class=\"window-control\" style=\"background: #ff5f56\"></div>\n                <div class=\"window-control\" style=\"background: #ffbd2e\"></div>\n                <div class=\"window-control\" style=\"background: #28ca42\"></div>\n            </div>\n            <div style=\"margin-left: 12px;\">System Preferences</div>\n            <div style=\"flex-grow: 1\"></div>\n        </div>\n        <div class=\"window-content\">\n            <h2>System Preferences</h2>\n            <p>Adjust settings for your Mac</p>\n        </div>\n        <div class=\"modal-resize-handle\"></div>\n    </div>\n\n    <div id=\"windowCalculator\" class=\"window\" data-window=\"calculator\">\n        <div class=\"window-titlebar\">\n            <div class=\"window-controls\">\n                <div class=\"window-control\" style=\"background: #ff5f56\"></div>\n                <div class=\"window-control\" style=\"background: #ffbd2e\"></div>\n                <div class=\"window-control\" style=\"background: #28ca42\"></div>\n            </div>\n            <div style=\"margin-left: 12px;\">Calculator</div>\n            <div style=\"flex-grow: 1\"></div>\n        </div>\n        <div class=\"window-content\">\n            <h2>Calculator</h2>\n            <p>Perform arithmetic operations</p>\n        </div>\n        <div class=\"modal-resize-handle\"></div>\n    </div>\n\n    <div id=\"windowNotes\" class=\"window\" data-window=\"notes\">\n        <div class=\"window-titlebar\">\n            <div class=\"window-controls\">\n                <div class=\"window-control\" style=\"background: #ff5f56\"></div>\n                <div class=\"window-control\" style=\"background: #ffbd2e\"></div>\n                <div class=\"window-control\" style=\"background: #28ca42\"></div>\n            </div>\n            <div style=\"margin-left: 12px;\">Notes</div>\n            <div style=\"flex-grow: 1\"></div>\n        </div>\n        <div class=\"window-content\">\n            <h2>Notes</h2>\n            <p>Your quick notes organizer</p>\n        </div>\n        <div class=\"modal-resize-handle\"></div>\n    </div>\n\n    <div id=\"windowCalendar\" class=\"window\" data-window=\"calendar\">\n        <div class=\"window-titlebar\">\n            <div class=\"window-controls\">\n                <div class=\"window-control\" style=\"background: #ff5f56\"></div>\n                <div class=\"window-control\" style=\"background: #ffbd2e\"></div>\n                <div class=\"window-control\" style=\"background: #28ca42\"></div>\n            </div>\n            <div style=\"margin-left: 12px;\">Calendar</div>\n            <div style=\"flex-grow: 1\"></div>\n        </div>\n        <div class=\"window-content\">\n            <h2>Calendar</h2>\n            <p>View and manage your events</p>\n        </div>\n        <div class=\"modal-resize-handle\"></div>\n    </div>\n\n    <script>\n        let activeWindow = null;\n        let activeWindowData = null;\n        let isDragging = false;\n        let isResizing = false;\n        let dragStart = { x: 0, y: 0 };\n        let initialWindowPos = { x: 0, y: 0 };\n        let initialWindowSize = { w: 0, h: 0 };\n        let currentWindow = null;\n\n        document.addEventListener('DOMContentLoaded', function() {\n            const windows = document.querySelectorAll('.window');\n            const dockItems = document.querySelectorAll('.dock-item');\n            const menubarItems = document.querySelectorAll('.menubar-item[data-dropdown]');\n            const notificationsBtn = document.createElement('div');\n            const spotlightBtn = document.createElement('div');\n            const missionControlBtn = document.createElement('div');\n\n            notificationsBtn.innerHTML = '<span class=\"iconify\" data-icon=\"bi:bell-fill\" data-width=\"24\" data-height=\"24\"></span>';\n            spotlightBtn.innerHTML = '<span class=\"iconify\" data-icon=\"system:search\" data-width=\"24\" data-height=\"24\"></span>';\n            missionControlBtn.innerHTML = '<span class=\"iconify\" data-icon=\"ic:baseline-games\" data-width=\"24\" data-height=\"24\"></span>';\n\n            notificationsBtn.className = 'menubar-item';\n            spotlightBtn.className = 'menubar-item';\n            missionControlBtn.className = 'menubar-item';\n\n            notificationsBtn.addEventListener('click', () => toggleNotifications());\n            \n            spotlightBtn.addEventListener('click', () => toggleSpotlight());\n            missionControlBtn.addEventListener('click', () => toggleMissionControl());\n\n            document.querySelector('.clock').parentNode.insertBefore(notificationsBtn, document.querySelector('.clock'));\n            document.querySelector('.clock').parentNode.insertBefore(spotlightBtn, document.querySelector('.clock'));\n            document.querySelector('.clock').parentNode.insertBefore(missionControlBtn, document.querySelector('.clock'));\n\n            dockItems.forEach(item => {\n                item.addEventListener('click', function() {\n                    const windowId = this.id.replace('dock', 'window');\n                    const window = document.getElementById(windowId);\n                    const windowData = window.dataset.window;\n\n                    if (activeWindowData === windowData) {\n                        window.style.left = '20px';\n                        window.style.top = '20px';\n                        window.classList.remove('show');\n                        activeWindowData = null;\n                        document.body.style.cursor = 'default';\n                    } else {\n                        windows.forEach(w => {\n                            w.style.left = '20px';\n                            w.style.top = '20px';\n                            w.classList.remove('show');\n                        });\n                        window.classList.add('show');\n                        window.style.width = '600px';\n                        window.style.height = '400px';\n                        activeWindowData = windowData;\n                    }\n\n                    setTimeout(() => window.style.width = window.offsetWidth + 'px', 0);\n                });\n            });\n\n            menubarItems.forEach(item => {\n                item.addEventListener('click', function() {\n                    const dropdownName = this.dataset.dropdown;\n                    const dropdown = document.getElementById(dropdownName);\n                    const allDropdowns = document.querySelectorAll('.menu-dropdown');\n\n                    allDropdowns.forEach(d => d.classList.remove('show'));\n                    dropdown.classList.toggle('show');\n\n                    closeOnClickOutside(dropdown);\n                });\n            });\n\n            const closeMenus = () => {\n                document.querySelectorAll('.menu-dropdown').forEach(dropdown => dropdown.classList.remove('show'));\n            };\n\n            // Window dragging functionality\n            windows.forEach(window => {\n                const titlebar = window.querySelector('.window-titlebar');\n                titlebar.addEventListener('mousedown', startDragging);\n                titlebar.addEventListener('mousemove', drag);\n                titlebar.addEventListener('mouseup', stopDragging);\n            });\n\n            // Window resizing functionality\n            windows.forEach(window => {\n                const resizeHandle = window.querySelector('.modal-resize-handle');\n                resizeHandle.addEventListener('mousedown', startResizing);\n            });\n\n            document.addEventListener('mousemove', resize);\n            document.addEventListener('mouseup', stopResizing);\n        });\n\n        function startDragging(e) {\n            const window = e.currentTarget.parentNode;\n            const windowPos = window.getBoundingClientRect();\n\n            isDragging = true;\n            dragStart = { x: e.clientX, y: e.clientY };\n            initialWindowPos = { x: windowPos.left, y: windowPos.top };\n\n            window.style.position = 'absolute';\n            window.style.opacity = '0.8';\n\n            document.addEventListener('mousemove', drag);\n        }\n\n        function drag(e) {\n            if (!isDragging) return;\n\n            e.preventDefault();\n\n            const window = e.currentTarget.parentNode;\n            const currentX = e.clientX;\n            const currentY = e.clientY;\n\n            const newLeft = initialWindowPos.x + (currentX - dragStart.x);\n            const newTop = initialWindowPos.y + (currentY - dragStart.y);\n\n            window.style.left = newLeft + 'px';\n            window.style.top = newTop + 'px';\n        }\n\n        function stopDragging() {\n            isDragging = false;\n            document.removeEventListener('mousemove', drag);\n\n            const window = document.querySelector('.window.show');\n            if (window) {\n                window.style.opacity = '1';\n            }\n        }\n\n        function startResizing(e) {\n            const window = e.currentTarget.parentNode;\n\n            isResizing = true;\n            dragStart = { x: e.clientX, y: e.clientY };\n            initialWindowSize = { w: window.offsetWidth, h: window.offsetHeight };\n\n            window.classList.add('resizing');\n            currentWindow = window;\n\n            document.body.style.cursor = 'nwse-resize';\n        }\n\n        function resize(e) {\n            if (!isResizing || !currentWindow) return;\n\n            e.preventDefault();\n\n            const currentX = e.clientX;\n            const currentY = e.clientY;\n\n            const newWidth = Math.max(300, initialWindowSize.w + (currentX - dragStart.x));\n            const newHeight = Math.max(200, initialWindowSize.h + (currentY - dragStart.y));\n\n            currentWindow.style.width = newWidth + 'px';\n            currentWindow.style.height = newHeight + 'px';\n        }\n\n        function stopResizing(e) {\n            if (!isResizing) return;\n\n            isResizing = false;\n            if (currentWindow) {\n                currentWindow.classList.remove('resizing');\n                currentWindow = null;\n            }\n            document.body.style.cursor = 'default';\n        }\n\n        function toggleNotifications() {\n            const notifications = document.getElementById('notifications');\n            const allPanels = document.querySelectorAll('.search-bar.show, #missionControl.show');\n            allPanels.forEach(panel => panel.classList.remove('show'));\n\n            notifications.classList.toggle('show');\n        }\n\n        function toggleSpotlight() {\n            const searchBar = document.getElementById('searchBar');\n            const allPanels = document.querySelectorAll('#notifications.show, #missionControl.show');\n            allPanels.forEach(panel => panel.classList.remove('show'));\n\n            searchBar.classList.toggle('show');\n            if (searchBar.classList.contains('show')) {\n                searchBar.querySelector('input').focus();\n            } else {\n                searchBar.querySelector('input').blur();\n            }\n        }\n\n        function toggleMissionControl() {\n            const missionControl = document.getElementById('missionControl');\n            const allPanels = document.querySelectorAll('#notifications.show, #searchBar.show');\n            allPanels.forEach(panel => panel.classList.remove('show'));\n\n            missionControl.classList.toggle('show');\n            updateDesktopStates();\n        }\n\n        function closeOnClickOutside(element) {\n            document.addEventListener('click', function handleClickOutside(event) {\n                if (!element.contains(event.target)) {\n                    element.classList.remove('show');\n                    document.removeEventListener('click', handleClickOutside);\n                }\n            });\n        }\n\n        function updateDesktopStates() {\n            const desktops = document.querySelectorAll('.desktop-item');\n            desktops.forEach(desktop => {\n                desktop.addEventListener('click', function() {\n                    desktops.forEach(d => d.classList.remove('active'));\n                    this.classList.add('active');\n                });\n            });\n        }\n\n        // Clock updates every second\n        setInterval(() => {\n            const now = new Date();\n            const timeStr = now.toLocaleTimeString('en-US', { \n                weekday: 'short', \n                hour: 'numeric', \n                minute: 'numeric', \n                hour12: true \n            });\n            document.querySelector('.clock').textContent = timeStr;\n        }, 1000);\n\n        document.addEventListener('keydown', (e) => {\n            if (e.metaKey && e.key === ' ') {\n                e.preventDefault();\n                toggleMissionControl();\n            }\n\n            if (e.metaKey && e.key === ' ') {\n                e.preventDefault();\n                // Command+space is handled above\n            }\n        });\n\n        document.addEventListener('click', (e) => {\n            if (!e.target.closest('.window')) {\n                closeMenus();\n            }\n        });\n    </script>\n</body>\n</html>"
}