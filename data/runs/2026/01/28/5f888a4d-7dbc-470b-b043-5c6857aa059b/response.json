{
  "text": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Comprehensive Photo Editor</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js\"></script>\n    <style>\n        .tools-panel {\n            min-width: 250px;\n            background: #1a1a1a;\n        }\n\n        .adjustments-panel {\n            min-width: 300px;\n        }\n\n        .layers-panel {\n            min-width: 200px;\n        }\n\n        .history-panel {\n            min-width: 200px;\n        }\n\n        .canvas-wrapper {\n            background: #434343;\n            overflow: auto;\n        }\n\n        .tools-btn {\n            background: #333;\n            border: 1px solid #555;\n            color: #fff;\n            transition: all 0.2s;\n        }\n\n        .tools-btn:hover {\n            background: #555;\n        }\n\n        .active {\n            background: #007fff;\n        }\n\n        .color-swatch {\n            width: 40px;\n            height: 40px;\n            border: none;\n            border-radius: 4px;\n        }\n\n        .slider {\n            width: 100%;\n        }\n\n        .warning {\n            color: #fab005;\n        }\n\n        @keyframes shake {\n            0%, 100% { transform: translateX(0); }\n            25% { transform: translateX(-4px); }\n            75% { transform: translateX(4px); }\n        }\n\n        .shake {\n            animation: shake 0.5s;\n        }\n    </style>\n</head>\n<body class=\"bg-gray-900 text-white w-screen h-screen flex overflow-hidden\">\n    <div id=\"tools-panel\" class=\"tools-panel flex-shrink-0\">\n        <div class=\"p-4\">\n            <h2 class=\"text-lg font-semibold mb-4\">Tools</h2>\n            <div class=\"grid grid-cols-2 gap-2\">\n                <button id=\"select-tool\" class=\"tools-btn w-full p-2 active\" title=\"Select Tool (V)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11l-7 7-7-7\"></path>\n                    </svg>\n                </button>\n                <button id=\"move-tool\" class=\"tools-btn w-full p-2\" title=\"Move Tool (M)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5\"></path>\n                    </svg>\n                </button>\n                <button id=\"crop-tool\" class=\"tools-btn w-full p-2\" title=\"Crop Tool (C)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 5h16a2 2 0 002-2V4a2 2 0 00-2-2H4a2 2 0 00-2 2v1a2 2 0 002 2zm0 6h16a2 2 0 002-2v-1a2 2 0 00-2-2H4a2 2 0 00-2 2v1a2 2 0 002 2zm0 6h16a2 2 0 002-2v-1a2 2 0 00-2-2H4a2 2 0 00-2 2v1a2 2 0 002 2z\"></path>\n                    </svg>\n                </button>\n                <button id=\"text-tool\" class=\"tools-btn w-full p-2\" title=\"Text Tool (T)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.56 0-1.055-.29-1.338-.725l-3.5-7A2 2 0 003 12V10a2 2 0 012-2h4\"></path>\n                    </svg>\n                </button>\n                <button id=\"draw-tool\" class=\"tools-btn w-full p-2\" title=\"Draw Tool (B)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path>\n                    </svg>\n                </button>\n                <button id=\"erase-tool\" class=\"tools-btn w-full p-2\" title=\"Erase Tool (E)\">\n                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <div id=\"main-panel\" class=\"flex flex-1\">\n        <div class=\"canvas-wrapper flex-1 border-b border-r border-gray-800\">\n            <canvas id=\"main-canvas\" class=\"mx-auto\"></canvas>\n            <div id=\"crop-guide\" class=\"hidden absolute bg-gray-600 bg-opacity-50 border-2 border-dashed border-white\"></div>\n        </div>\n\n        <div class=\"flex flex-col\">\n            <div id=\"adjustments-panel\" class=\"adjustments-panel p-4\">\n                <h2 class=\"text-lg font-semibold mb-4\">Adjustments</h2>\n                <div class=\"space-y-3\">\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm\">Brightness</span>\n                        <span id=\"brightness-value\" class=\"ml-2 text-sm w-8 text-right\">0</span>\n                    </div>\n                    <input type=\"range\" id=\"brightness-slider\" class=\"slider\" min=\"-100\" max=\"100\" value=\"0\">\n\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm\">Contrast</span>\n                        <span id=\"contrast-value\" class=\"ml-2 text-sm w-8 text-right\">0</span>\n                    </div>\n                    <input type=\"range\" id=\"contrast-slider\" class=\"slider\" min=\"-100\" max=\"100\" value=\"0\">\n\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm\">Saturation</span>\n                        <span id=\"saturation-value\" class=\"ml-2 text-sm w-8 text-right\">0</span>\n                    </div>\n                    <input type=\"range\" id=\"saturation-slider\" class=\"slider\" min=\"-100\" max=\"100\" value=\"0\">\n\n                    <div class=\"flex items-center justify-between\">\n                        <span class=\"text-sm\">Blur</span>\n                        <span id=\"blur-value\" class=\"ml-2 text-sm w-8 text-right\">0</span>\n                    </div>\n                    <input type=\"range\" id=\"blur-slider\" class=\"slider\" min=\"0\" max=\"10\" step=\"0.1\" value=\"0\">\n                </div>\n            </div>\n\n            <div id=\"layers-panel\" class=\"layers-panel p-4\">\n                <h2 class=\"text-lg font-semibold mb-4\">Layers</h2>\n                <div id=\"layers-list\" class=\"space-y-2\"></div>\n            </div>\n\n            <div id=\"history-panel\" class=\"history-panel p-4\">\n                <h2 class=\"text-lg font-semibold mb-4\">History</h2>\n                <div id=\"history-list\" class=\"space-y-1\"></div>\n            </div>\n        </div>\n    </div>\n\n    <div id=\"color-picker\" class=\"hidden fixed inset-0 bg-gray-900 bg-opacity-90 flex items-center justify-center z-50\">\n        <div class=\"bg-gray-800 p-4 rounded-lg\">\n            <h3 class=\"text-lg font-semibold mb-4\">Color Picker</h3>\n            <input type=\"color\" id=\"picker\" class=\"color-swatch mb-4\">\n            <input type=\"text\" id=\"hex-input\" class=\"w-full bg-gray-700 text-white px-2 py-1 mb-3\">\n            <div class=\"flex justify-end gap-2\">\n                <button id=\"color-cancel\" class=\"bg-gray-700 px-3 py-1\">Cancel</button>\n                <button id=\"color-confirm\" class=\"bg-blue-600 px-3 py-1\">Confirm</button>\n            </div>\n        </div>\n    </div>\n\n    <div id=\"text-input-modal\" class=\"hidden fixed inset-0 bg-gray-900 bg-opacity-90 flex items-center justify-center z-50\">\n        <div class=\"bg-gray-800 p-4 rounded-lg w-96\">\n            <h3 class=\"text-lg font-semibold mb-4\">Add Text</h3>\n            <textarea id=\"text-input\" class=\"w-full bg-gray-700 text-white px-2 py-1 mb-3\" rows=\"4\"></textarea>\n            <div class=\"flex justify-end gap-2\">\n                <button id=\"text-cancel\" class=\"bg-gray-700 px-3 py-1\">Cancel</button>\n                <button id=\"text-confirm\" class=\"bg-blue-600 px-3 py-1\">Add</button>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"app.js\"></script>\n</body>\n</html>\n```"
}