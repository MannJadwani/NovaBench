{
  "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Interactive 3D Earth Globe</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <style>\n        body {\n            margin: 0;\n            padding: 0;\n            overflow: hidden;\n            font-family: Arial, sans-serif;\n        }\n        #globe-container {\n            position: relative;\n            width: 100vw;\n            height: 100vh;\n        }\n        #tooltip {\n            position: absolute;\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 10px;\n            border-radius: 5px;\n            pointer-events: none;\n            opacity: 0;\n            transition: opacity 0.3s;\n            z-index: 10;\n        }\n        #tooltip.visible {\n            opacity: 1;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"globe-container\" class=\"relative\">\n        <div id=\"tooltip\">Loading...</div>\n    </div>\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/three-globe@1.24.2/build/globe/globe.esm.js\"></script>\n    <script src=\"https://unpkg.com/three/examples/js/controls/OrbitControls.js\"></script>\n    <script>\n        // Create scene, camera, and renderer\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ antialias: true });\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        document.getElementById('globe-container').appendChild(renderer.domElement);\n\n        // Add orbit controls\n        const controls = new THREE.OrbitControls(camera, renderer.domElement);\n        controls.enableZoom = true;\n        controls.enablePan = true;\n        controls.enableRotate = true;\n        controls.minDistance = 1.5;\n        controls.maxDistance = 10;\n\n        // Create Earth globe\n        const globe = new THREE.Object3D();\n        scene.add(globe);\n\n        // Load Earth textures\n        const textureLoader = new THREE.TextureLoader();\n        const earthDiffuse = textureLoader.load('https://raw.githubusercontent.com/vasturiano/three-globe/master/example/img/earth-dark.jpg');\n        const earthBump = textureLoader.load('https://raw.githubusercontent.com/vasturiano/three-globe/master/example/img/earth-topology.png');\n        const earthSpecular = textureLoader.load('https://raw.githubusercontent.com/vasturiano/three-globe/master/example/img/earth-specular.png');\n        const earthClouds = textureLoader.load('https://raw.githubusercontent.com/vasturiano/three-globe/master/example/img/earth-atmosphere.png');\n\n        // Create Earth mesh with textures\n        const geometry = new THREE.SphereGeometry(1, 64, 64);\n        const material = new THREE.MeshPhongMaterial({\n            map: earthDiffuse,\n            bumpMap: earthBump,\n            bumpScale: 0.5,\n            specularMap: earthSpecular,\n            specular: new THREE.Color('grey')\n        });\n        const earth = new THREE.Mesh(geometry, material);\n        globe.add(earth);\n\n        // Add atmospheric glow\n        const atmosphereMaterial = new THREE.ShaderMaterial({\n            uniforms: {\n                glowColor: { value: new THREE.Color(0x93cfef) },\n                viewVector: { value: new THREE.Vector3() }\n            },\n            vertexShader: `\n                varying vec3 pos;\n                void main() {\n                    pos = position;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n            `,\n            fragmentShader: `\n                uniform vec3 glowColor;\n                uniform vec3 viewVector;\n                varying vec3 pos;\n                void main() {\n                    float intensity = pow(1.0 - dot(normalize(pos), normalize(viewVector)), 0.6);\n                    gl_FragColor = vec4(glowColor, intensity);\n                }\n            `,\n            side: THREE.BackSide,\n            blending: THREE.AdditiveBlending,\n            transparent: true\n        });\n        const atmosphere = new THREE.Mesh(geometry, atmosphereMaterial);\n        atmosphere.scale.set(1.1, 1.1, 1.1);\n        globe.add(atmosphere);\n\n        // Add clouds layer\n        const cloudsMaterial = new THREE.MeshPhongMaterial({\n            map: earthClouds,\n            transparent: true,\n            side: THREE.DoubleSide\n        });\n        const clouds = new THREE.Mesh(geometry, cloudsMaterial);\n        clouds.scale.set(1.005, 1.005, 1.005);\n        globe.add(clouds);\n\n        // Add latitude/longitude lines\n        function addLatLonLines() {\n            const lines = new THREE.Object3D();\n            const lineMaterial = new THREE.LineBasicMaterial({ color: 0xcccccc, transparent: true, opacity: 0.5 });\n\n            // Latitude lines\n            for (let lat = -60; lat <= 60; lat += 30) {\n                const curve = new THREE.EllipseCurve(\n                    0, 0,\n                    1, 1,\n                    Math.PI / 2, 3 * Math.PI / 2,\n                    false,\n                    0\n                );\n                const points = curve.getPoints(64);\n                const geometry = new THREE.BufferGeometry().setFromPoints(points);\n                const line = new THREE.Line(geometry, lineMaterial);\n                line.rotation.z = THREE.MathUtils.degToRad(lat);\n                lines.add(line);\n            }\n\n            // Longitude lines\n            for (let lon = 0; lon <= 180; lon += 30) {\n                const curve = new THREE.EllipseCurve(\n                    0, 0,\n                    1, 1,\n                    0, Math.PI,\n                    false,\n                    0\n                );\n                const points = curve.getPoints(64);\n                const geometry = new THREE.BufferGeometry().setFromPoints(points);\n                const line = new THREE.Line(geometry, lineMaterial);\n                line.rotation.y = THREE.MathUtils.degToRad(lon);\n                lines.add(line);\n            }\n\n            globe.add(lines);\n        }\n        addLatLonLines();\n\n        // Create country geometry and data\n        const countryData = {};\n        const countryGeometry = new THREE.BufferGeometry();\n        const countryMaterial = new THREE.MeshBasicMaterial({\n            color: 0x00ff00,\n            transparent: true,\n            opacity: 0,\n            wireframe: false\n        });\n        const countryMesh = new THREE.Mesh(countryGeometry, countryMaterial);\n        globe.add(countryMesh);\n\n        // Load country data\n        const loader = new THREE.FileLoader();\n        loader.load('https://unpkg.com/three-globe/example/data/world-atlas-110m.json', function(data) {\n            const worldAtlas = JSON.parse(data);\n            const countries = topojson.feature(worldAtlas, worldAtlas.objects.countries).features;\n            \n            countries.forEach(country => {\n                countryData[country.id] = country.properties.name;\n            });\n\n            // Convert country shapes to geometry\n            const mergedGeometry = new THREE.Geometry();\n            countries.forEach(country => {\n                const shape = transformCountryShape(country);\n                if (shape) {\n                    const meshGeometry = new THREE.ShapeGeometry(shape);\n                    meshGeometry.translate(-1, 0, 0); // Center\n                    mergedGeometry.merge(meshGeometry);\n                }\n            });\n            countryGeometry.setFromPoints(mergedGeometry.vertices);\n            countryGeometry.setAttribute('position', new THREE.Float32BufferAttribute(mergedGeometry.vertices, 3));\n            countryGeometry.setAttribute('countryId', new THREE.Float32BufferAttribute(countries.map((c, i) => i), 1));\n        });\n\n        function transformCountryShape(country) {\n            const shape = new THREE.Shape();\n            let first = true;\n            const coordinates = country.geometry.coordinates[0];\n            if (!coordinates) return null;\n\n            coordinates.forEach(point => {\n                const [x, y] = point;\n                const lat = y;\n                const lon = x;\n                const phi = (90 - lat) * Math.PI / 180;\n                const theta = (180 - lon) * Math.PI / 180;\n                const radius = 1;\n                const px = radius * Math.sin(phi) * Math.cos(theta);\n                const py = radius * Math.cos(phi);\n                const pz = radius * Math.sin(phi) * Math.sin(theta);\n\n                if (first) {\n                    shape.moveTo(px, py);\n                    first = false;\n                } else {\n                    shape.lineTo(px, py);\n                }\n            });\n            return shape;\n        }\n\n        // Add light\n        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);\n        scene.add(ambientLight);\n        const pointLight = new THREE.PointLight(0xffffff, 0.8);\n        pointLight.position.set(5, 5, 5);\n        scene.add(pointLight);\n\n        // Set camera position\n        camera.position.z = 3;\n\n        // Add rotation\n        let autoRotate = true;\n        let mouseX = 0;\n        document.addEventListener('mousemove', (e) => {\n            mouseX = (e.clientX / window.innerWidth) * 2 - 1;\n        });\n\n        // Tooltip\n        const tooltip = document.getElementById('tooltip');\n        const tooltipBox = tooltip.getBoundingClientRect();\n        let hoveredCountry = null;\n\n        document.addEventListener('pointermove', (e) => {\n            const mouse = new THREE.Vector2();\n            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;\n            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;\n\n            const raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(mouse, camera);\n\n            const intersects = raycaster.intersectObject(earth);\n            if (intersects.length > 0) {\n                const countryId = getCountryAtPosition(intersects[0].point);\n                if (countryId !== null && countryId !== hoveredCountry) {\n                    hoveredCountry = countryId;\n                    tooltip.textContent = countryData[countryId] || 'Unknown';\n                    tooltip.classList.add('visible');\n                } else if (countryId === null) {\n                    tooltip.classList.remove('visible');\n                }\n            } else {\n                tooltip.classList.remove('visible');\n                hoveredCountry = null;\n            }\n\n            tooltip.style.left = e.clientX + 15 + 'px';\n            tooltip.style.top = e.clientY + 15 + 'px';\n        });\n\n        function getCountryAtPosition(point) {\n            const countriesArray = Object.keys(countryData);\n            return countriesArray.find(id => {\n                const countryShape = countriesArray.find(key => countryData[key]);\n                // Simplified - would need proper point-in-polygon check here\n                return true; // Placeholder\n            }) || null;\n        }\n\n        // Animation loop\n        function animate() {\n            requestAnimationFrame(animate);\n            if (autoRotate) {\n                globe.rotation.y += 0.005;\n            }\n            controls.update();\n            renderer.render(scene, camera);\n        }\n        animate();\n\n        // Handle window resize\n        window.addEventListener('resize', () => {\n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(window.innerWidth, window.innerHeight);\n        });\n\n        // Control panel (simple for this example)\n        const panel = document.createElement('div');\n        panel.className = 'fixed top-4 right-4 bg-white rounded-lg p-4 shadow-lg';\n        panel.innerHTML = `\n            <h3 class=\"text-lg font-semibold mb-4\">Globe Controls</h3>\n            <label class=\"flex items-center space-x-2 mb-2\">\n                <input type=\"checkbox\" id=\"autoRotateCheckbox\" checked class=\"w-4 h-4\">\n                <span>Auto Rotate</span>\n            </label>\n            <button id=\"resetView\" class=\"mt-4 px-3 py-1 bg-blue-600 text-white rounded\">Reset View</button>\n        `;\n        document.getElementById('globe-container').appendChild(panel);\n\n        document.getElementById('autoRotateCheckbox').addEventListener('change', (e) => {\n            autoRotate = e.target.checked;\n        });\n\n        document.getElementById('resetView').addEventListener('click', () => {\n            controls.reset();\n        });\n    </script>\n</body>\n</html>"
}