{
  "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>macOS Desktop Environment</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <style>\n        body {\n            margin: 0;\n            padding: 0;\n            overflow: hidden;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n        }\n        .desktop-bg {\n            background-image: url('https://picsum.photos/seed/macos-wallpaper/1920/1080.jpg');\n            background-size: cover;\n            background-position: center;\n            background-repeat: no-repeat;\n            height: 100vh;\n            position: relative;\n        }\n        .window {\n            position: absolute;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n            border-radius: 8px;\n            overflow: hidden;\n            min-width: 300px;\n            min-height: 200px;\n        }\n        .window-header {\n            cursor: move;\n            background: linear-gradient(to bottom, #e6e6e6, #d9d9d9);\n            border-bottom: 1px solid #bbb;\n            display: flex;\n            align-items: center;\n            padding: 5px 10px;\n            height: 28px;\n        }\n        .window-controls {\n            display: flex;\n            gap: 8px;\n            margin-right: 10px;\n        }\n        .window-control {\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            cursor: pointer;\n        }\n        .resize-handle {\n            position: absolute;\n            bottom: 0;\n            right: 0;\n            width: 15px;\n            height: 15px;\n            cursor: nwse-resize;\n            z-index: 10;\n        }\n        .dock-item {\n            transition: all 0.2s ease;\n            transform-origin: bottom center;\n        }\n        .mission-control-window {\n            transition: all 0.3s ease;\n            cursor: pointer;\n            border: 2px solid transparent;\n        }\n        .mission-control-window:hover {\n            border-color: #3282d8;\n            transform: scale(1.05);\n        }\n        .desktop-space {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            display: none;\n        }\n        .desktop-space.active {\n            display: block;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"desktop-container\" class=\"relative w-full h-screen\">\n        <!-- Desktop Background -->\n        <div class=\"desktop-bg\">\n            <!-- Desktop Space 1 -->\n            <div id=\"space-1\" class=\"desktop-space active\">\n                <!-- Desktop Icons -->\n                <div class=\"absolute top-10 left-10 flex flex-col items-center text-white text-xs\" draggable=\"true\">\n                    <div class=\"w-16 h-16 mb-1 rounded-lg bg-blue-500/20 backdrop-blur-sm flex items-center justify-center\">\n                        <i class=\"fas fa-folder text-3xl text-white\"></i>\n                    </div>\n                    <span>Documents</span>\n                </div>\n                <div class=\"absolute top-32 left-10 flex flex-col items-center text-white text-xs\" draggable=\"true\">\n                    <div class=\"w-16 h-16 mb-1 rounded-lg bg-green-500/20 backdrop-blur-sm flex items-center justify-center\">\n                        <i class=\"fas fa-download text-3xl text-white\"></i>\n                    </div>\n                    <span>Downloads</span>\n                </div>\n            </div>\n            \n            <!-- Desktop Space 2 -->\n            <div id=\"space-2\" class=\"desktop-space\">\n                <div class=\"absolute top-10 left-10 flex flex-col items-center text-white text-xs\" draggable=\"true\">\n                    <div class=\"w-16 h-16 mb-1 rounded-lg bg-purple-500/20 backdrop-blur-sm flex items-center justify-center\">\n                        <i class=\"fas fa-image text-3xl text-white\"></i>\n                    </div>\n                    <span>Pictures</span>\n                </div>\n            </div>\n            \n            <!-- Desktop Space 3 -->\n            <div id=\"space-3\" class=\"desktop-space\">\n                <div class=\"absolute top-10 left-10 flex flex-col items-center text-white text-xs\" draggable=\"true\">\n                    <div class=\"w-16 h-16 mb-1 rounded-lg bg-yellow-500/20 backdrop-blur-sm flex items-center justify-center\">\n                        <i class=\"fas fa-music text-3xl text-white\"></i>\n                    </div>\n                    <span>Music</span>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Top Menu Bar -->\n        <div class=\"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-black/80 to-black/50 backdrop-blur-sm flex items-center px-4 text-white text-sm z-50\">\n            <div class=\"flex items-center space-x-6\">\n                <div class=\"font-bold\">Finder</div>\n                <div class=\"flex space-x-4\">\n                    <div id=\"file-menu\" class=\"hover:underline cursor-pointer\">File</div>\n                    <div id=\"edit-menu\" class=\"hover:underline cursor-pointer\">Edit</div>\n                    <div id=\"view-menu\" class=\"hover:underline cursor-pointer\">View</div>\n                    <div id=\"go-menu\" class=\"hover:underline cursor-pointer\">Go</div>\n                    <div id=\"window-menu\" class=\"hover:underline cursor-pointer\">Window</div>\n                    <div id=\"help-menu\" class=\"hover:underline cursor-pointer\">Help</div>\n                </div>\n            </div>\n            \n            <div class=\"absolute right-4 flex items-center space-x-4\">\n                <div id=\"wifi-icon\" class=\"cursor-pointer\"><i class=\"fas fa-wifi\"></i></div>\n                <div id=\"battery-icon\" class=\"cursor-pointer\"><i class=\"fas fa-battery-three-quarters\"></i></div>\n                <div id=\"date-time\" class=\"cursor-pointer\">9:41 AM</div>\n                <div id=\"notification-center-toggle\" class=\"cursor-pointer\"><i class=\"fas fa-bell\"></i></div>\n                <div id=\"spotlight-toggle\" class=\"cursor-pointer\"><i class=\"fas fa-search\"></i></div>\n            </div>\n        </div>\n        \n        <!-- Windows Container -->\n        <div id=\"windows-container\" class=\"absolute inset-0 pointer-events-none\">\n            <!-- Windows will be dynamically created here -->\n        </div>\n        \n        <!-- Dock -->\n        <div id=\"dock\" class=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/30 backdrop-blur-lg rounded-xl px-4 py-2 flex items-end space-x-2 h-16\">\n            <div class=\"dock-item w-12 h-12 flex items-center justify-center cursor-pointer\" data-app=\"finder\">\n                <i class=\"fas fa-folder text-white text-2xl\"></i>\n            </div>\n            <div class=\"dock-item w-12 h-12 flex items-center justify-center cursor-pointer\" data-app=\"settings\">\n                <i class=\"fas fa-cog text-white text-2xl\"></i>\n            </div>\n            <div class=\"dock-item w-12 h-12 flex items-center justify-center cursor-pointer\" data-app=\"calculator\">\n                <i class=\"fas fa-calculator text-white text-2xl\"></i>\n            </div>\n            <div class=\"dock-item w-12 h-12 flex items-center justify-center cursor-pointer\" data-app=\"notes\">\n                <i class=\"fas fa-sticky-note text-white text-2xl\"></i>\n            </div>\n            <div class=\"dock-item w-12 h-12 flex items-center justify-center cursor-pointer\" data-app=\"calendar\">\n                <i class=\"fas fa-calendar-alt text-white text-2xl\"></i>\n            </div>\n        </div>\n        \n        <!-- Mission Control -->\n        <div id=\"mission-control\" class=\"absolute inset-0 bg-black/80 backdrop-blur-lg z-50 hidden\">\n            <div class=\"absolute top-10 left-10 text-white text-2xl font-bold\">Mission Control</div>\n            <div class=\"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-4\">\n                <div class=\"mission-control-window bg-white/10 backdrop-blur-sm rounded-lg w-64 h-48 border border-white/20 flex flex-col items-center justify-center text-white\" data-space=\"1\">\n                    <i class=\"fas fa-desktop text-4xl mb-2\"></i>\n                    <div>Desktop 1</div>\n                </div>\n                <div class=\"mission-control-window bg-white/10 backdrop-blur-sm rounded-lg w-64 h-48 border border-white/20 flex flex-col items-center justify-center text-white\" data-space=\"2\">\n                    <i class=\"fas fa-desktop text-4xl mb-2\"></i>\n                    <div>Desktop 2</div>\n                </div>\n                <div class=\"mission-control-window bg-white/10 backdrop-blur-sm rounded-lg w-64 h-48 border border-white/20 flex flex-col items-center justify-center text-white\" data-space=\"3\">\n                    <i class=\"fas fa-desktop text-4xl mb-2\"></i>\n                    <div>Desktop 3</div>\n                </div>\n            </div>\n            <div id=\"close-mission-control\" class=\"absolute top-10 right-10 text-white text-2xl cursor-pointer hover:text-gray-300\">\n                <i class=\"fas fa-times\"></i>\n            </div>\n        </div>\n        \n        <!-- Spotlight Search -->\n        <div id=\"spotlight\" class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black/80 backdrop-blur-xl rounded-xl w-96 hidden z-50\">\n            <div class=\"p-4\">\n                <div class=\"flex items-center mb-4\">\n                    <i class=\"fas fa-search text-white mr-3\"></i>\n                    <input type=\"text\" id=\"spotlight-input\" class=\"bg-transparent text-white w-full outline-none text-lg\" placeholder=\"Search\" autofocus>\n                </div>\n                <div class=\"border-t border-gray-600 pt-2\">\n                    <div class=\"flex items-center py-2 text-white/80 hover:bg-white/10 rounded px-2 cursor-pointer\">\n                        <i class=\"fas fa-folder mr-3\"></i>\n                        <span>Folders</span>\n                    </div>\n                    <div class=\"flex items-center py-2 text-white/80 hover:bg-white/10 rounded px-2 cursor-pointer\">\n                        <i class=\"fas fa-file-alt mr-3\"></i>\n                        <span>Documents</span>\n                    </div>\n                    <div class=\"flex items-center py-2 text-white/80 hover:bg-white/10 rounded px-2 cursor-pointer\">\n                        <i class=\"fas fa-image mr-3\"></i>\n                        <span>Images</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Notification Center -->\n        <div id=\"notification-center\" class=\"absolute top-8 right-0 w-80 h-[calc(100vh-32px)] bg-black/50 backdrop-blur-lg transform translate-x-full transition-transform duration-300 z-50\">\n            <div class=\"p-4 text-white\">\n                <div class=\"flex justify-between items-center mb-4\">\n                    <h2 class=\"text-xl font-bold\">Notifications</h2>\n                    <button id=\"clear-notifications\" class=\"text-sm text-gray-300 hover:text-white\">Clear All</button>\n                </div>\n                <div class=\"space-y-3\">\n                    <div class=\"bg-black/30 p-3 rounded-lg\">\n                        <div class=\"flex justify-between items-start\">\n                            <div>\n                                <div class=\"font-semibold\">Calendar</div>\n                                <div class=\"text-sm\">Meeting at 10:30 AM</div>\n                            </div>\n                            <div class=\"text-xs\">9:41 AM</div>\n                        </div>\n                    </div>\n                    <div class=\"bg-black/30 p-3 rounded-lg\">\n                        <div class=\"flex justify-between items-start\">\n                            <div>\n                                <div class=\"font-semibold\">Mail</div>\n                                <div class=\"text-sm\">New message from John</div>\n                            </div>\n                            <div class=\"text-xs\">9:30 AM</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <script>\n        // Global variables\n        let currentSpace = 1;\n        let windows = [];\n        let activeWindow = null;\n        let isDragging = false;\n        let isResizing = false;\n        let dragOffsetX = 0;\n        let dragOffsetY = 0;\n        let dockItems = [];\n        \n        // Initialize\n        document.addEventListener('DOMContentLoaded', () => {\n            initializeDock();\n            initializeMenu();\n            initializeWindows();\n            initializeSpotlight();\n            initializeNotificationCenter();\n            initializeMissionControl();\n            initializeSpaces();\n            updateTime();\n            setInterval(updateTime, 60000); // Update time every minute\n        });\n        \n        // Initialize Dock with magnification\n        function initializeDock() {\n            const dock = document.getElementById('dock');\n            dockItems = Array.from(dock.querySelectorAll('.dock-item'));\n            \n            dock.addEventListener('mousemove', (e) => {\n                const mouseX = e.clientX;\n                dockItems.forEach(item => {\n                    const itemRect = item.getBoundingClientRect();\n                    const itemCenterX = itemRect.left + itemRect.width / 2;\n                    const distance = Math.abs(mouseX - itemCenterX);\n                    \n                    if (distance < 80) {\n                        const scale = 1 + (80 - distance) / 80 * 0.5;\n                        item.style.transform = `scale(${scale}) translateY(-${(scale - 1) * 20}px)`;\n                    } else {\n                        item.style.transform = 'scale(1)';\n                    }\n                });\n            });\n            \n            dock.addEventListener('mouseleave', () => {\n                dockItems.forEach(item => {\n                    item.style.transform = 'scale(1)';\n                });\n            });\n            \n            // App click handlers\n            dockItems.forEach(item => {\n                item.addEventListener('click', () => {\n                    const app = item.dataset.app;\n                    openApp(app);\n                });\n            });\n        }\n        \n        // Open app window\n        function openApp(appName) {\n            const windowsContainer = document.getElementById('windows-container');\n            let window = windows.find(w => w.app === appName && w.space === currentSpace);\n            \n            if (!window) {\n                window = createAppWindow(appName);\n                windows.push(window);\n                windowsContainer.appendChild(window.element);\n            } else {\n                // Focus existing window\n                bringToFront(window);\n            }\n        }\n        \n        // Create app window\n        function createAppWindow(appName) {\n            const windowDiv = document.createElement('div');\n            windowDiv.className = 'window bg-white';\n            windowDiv.style.left = '100px';\n            windowDiv.style.top = '100px';\n            windowDiv.style.width = '600px';\n            windowDiv.style.height = '400px';\n            \n            const header = document.createElement('div');\n            header.className = 'window-header';\n            \n            const controls = document.createElement('div');\n            controls.className = 'window-controls';\n            \n            const closeBtn = document.createElement('div');\n            closeBtn.className = 'window-control bg-red-500';\n            closeBtn.addEventListener('click', () => closeWindow(window));\n            \n            const minimizeBtn = document.createElement('div');\n            minimizeBtn.className = 'window-control bg-yellow-500';\n            minimizeBtn.addEventListener('click', () => minimizeWindow(window));\n            \n            const maximizeBtn = document.createElement('div');\n            maximizeBtn.className = 'window-control bg-green-500';\n            maximizeBtn.addEventListener('click', () => maximizeWindow(window));\n            \n            controls.appendChild(closeBtn);\n            controls.appendChild(minimizeBtn);\n            controls.appendChild(maximizeBtn);\n            \n            const title = document.createElement('div');\n            title.className = 'text-sm text-gray-700 flex-grow';\n            \n            const content = document.createElement('div');\n            content.className = 'p-4 h-full overflow-auto';\n            \n            // Set window content based on app\n            switch(appName) {\n                case 'finder':\n                    title.textContent = 'Finder';\n                    content.innerHTML = `\n                        <div class=\"flex h-full\">\n                            <div class=\"w-48 bg-gray-100 p-2\">\n                                <div class=\"mb-2\"><i class=\"fas fa-folder mr-2\"></i>Documents</div>\n                                <div class=\"mb-2\"><i class=\"fas fa-download mr-2\"></i>Downloads</div>\n                                <div class=\"mb-2\"><i class=\"fas fa-image mr-2\"></i>Pictures</div>\n                                <div class=\"mb-2\"><i class=\"fas fa-music mr-2\"></i>Music</div>\n                            </div>\n                            <div class=\"flex-grow\">\n                                <div class=\"flex items-center p-2 bg-gray-100 border-b\">\n                                    <i class=\"fas fa-arrow-left mr-4 text-gray-500\"></i>\n                                    <i class=\"fas fa-arrow-right mr-4 text-gray-500\"></i>\n                                    <div class=\"text-gray-700\">Documents</div>\n                                </div>\n                                <div class=\"p-4\">\n                                    <div class=\"grid grid-cols-4 gap-4\">\n                                        <div class=\"text-center\">\n                                            <div class=\"w-16 h-16 mx-auto bg-blue-100 rounded-lg flex items-center justify-center mb-1\">\n                                                <i class=\"fas fa-file-alt text-blue-500 text-2xl\"></i>\n                                            </div>\n                                            <div class=\"text-sm\">Document 1</div>\n                                        </div>\n                                        <div class=\"text-center\">\n                                            <div class=\"w-16 h-16 mx-auto bg-blue-100 rounded-lg flex items-center justify-center mb-1\">\n                                                <i class=\"fas fa-file-alt text-blue-500 text-2xl\"></i>\n                                            </div>\n                                            <div class=\"text-sm\">Document 2</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    break;\n                case 'settings':\n                    title.textContent = 'System Preferences';\n                    content.innerHTML = `\n                        <div class=\"grid grid-cols-4 gap-4\">\n                            <div class=\"text-center p-3 hover:bg-gray-100 rounded-lg cursor-pointer\">\n                                <div class=\"w-12 h-12 mx-auto bg-blue-100 rounded-lg flex items-center justify-center mb-2\">\n                                    <i class=\"fas fa-desktop text-blue-500\"></i>\n                                </div>\n                                <div class=\"text-xs\">General</div>\n                            </div>\n                            <div class=\"text-center p-3 hover:bg-gray-100 rounded-lg cursor-pointer\">\n                                <div class=\"w-12 h-12 mx-auto bg-purple-100 rounded-lg flex items-center justify-center mb-2\">\n                                    <i class=\"fas fa-paint-brush text-purple-500\"></i>\n                                </div>\n                                <div class=\"text-xs\">Desktop & Screen Saver</div>\n                            </div>\n                            <div class=\"text-center p-3 hover:bg-gray-100 rounded-lg cursor-pointer\">\n                                <div class=\"w-12 h-12 mx-auto bg-green-100 rounded-lg flex items-center justify-center mb-2\">\n                                    <i class=\"fas fa-dock text-green-500\"></i>\n                                </div>\n                                <div class=\"text-xs\">Dock</div>\n                            </div>\n                            <div class=\"text-center p-3 hover:bg-gray-100 rounded-lg cursor-pointer\">\n                                <div class=\"w-12 h-12 mx-auto bg-red-100 rounded-lg flex items-center justify-center mb-2\">\n                                    <i class=\"fas fa-shield-alt text-red-500\"></i>\n                                </div>\n                                <div class=\"text-xs\">Security & Privacy</div>\n                            </div>\n                        </div>\n                    `;\n                    break;\n                case 'calculator':\n                    title.textContent = 'Calculator';\n                    content.innerHTML = `\n                        <div class=\"flex flex-col items-center justify-center h-full\">\n                            <div class=\"bg-black text-white text-right p-3 rounded-t-lg w-64\">\n                                <div class=\"text-2xl\">0</div>\n                            </div>\n                            <div class=\"grid grid-cols-4 gap-1 w-64\">\n                                <button class=\"bg-gray-200 p-4 rounded hover:bg-gray-300\">C</button>\n                                <button class=\"bg-gray-200 p-4 rounded hover:bg-gray-300\">+/-</button>\n                                <button class=\"bg-gray-200 p-4 rounded hover:bg-gray-300\">%</button>\n                                <button class=\"bg-orange-500 text-white p-4 rounded hover:bg-orange-600\">รท</button>\n                                \n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">7</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">8</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">9</button>\n                                <button class=\"bg-orange-500 text-white p-4 rounded hover:bg-orange-600\">ร</button>\n                                \n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">4</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">5</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">6</button>\n                                <button class=\"bg-orange-500 text-white p-4 rounded hover:bg-orange-600\">-</button>\n                                \n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">1</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">2</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">3</button>\n                                <button class=\"bg-orange-500 text-white p-4 rounded hover:bg-orange-600\">+</button>\n                                \n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border col-span-2\">0</button>\n                                <button class=\"bg-white p-4 rounded hover:bg-gray-100 border\">.</button>\n                                <button class=\"bg-orange-500 text-white p-4 rounded hover:bg-orange-600\">=</button>\n                            </div>\n                        </div>\n                    `;\n                    break;\n                case 'notes':\n                    title.textContent = 'Notes';\n                    content.innerHTML = `\n                        <div class=\"flex h-full\">\n                            <div class=\"w-1/4 bg-gray-50 border-r p-2\">\n                                <div class=\"font-semibold mb-2\">Notes</div>\n                                <div class=\"text-sm p-2 hover:bg-gray-200 rounded cursor-pointer\">\n                                    <div class=\"font-medium\">Shopping List</div>\n                                    <div class=\"text-gray-500 text-xs\">Milk, Eggs, Bread...</div>\n                                </div>\n                                <div class=\"text-sm p-2 hover:bg-gray-200 rounded cursor-pointer\">\n                                    <div class=\"font-medium\">Meeting Notes</div>\n                                    <div class=\"text-gray-500 text-xs\">Discussion about...</div>\n                                </div>\n                                <div class=\"mt-4 text-blue-500 text-sm cursor-pointer\">\n                                    <i class=\"fas fa-plus mr-1\"></i>New Note\n                                </div>\n                            </div>\n                            <div class=\"flex-grow p-4\">\n                                <div class=\"border-b pb-2 mb-4\">\n                                    <h2 class=\"text-xl font-bold\">Shopping List</h2>\n                                </div>\n                                <div class=\"mb-4\">\n                                    <div class=\"flex items-center mb-1\">\n                                        <input type=\"checkbox\" class=\"mr-2\">\n                                        <span>Milk</span>\n                                    </div>\n                                    <div class=\"flex items-center mb-1\">\n                                        <input type=\"checkbox\" class=\"mr-2\">\n                                        <span>Eggs</span>\n                                    </div>\n                                    <div class=\"flex items-center mb-1\">\n                                        <input type=\"checkbox\" class=\"mr-2\" checked>\n                                        <span class=\"line-through text-gray-400\">Bread</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    break;\n                case 'calendar':\n                    title.textContent = 'Calendar';\n                    content.innerHTML = `\n                        <div class=\"p-4\">\n                            <div class=\"flex justify-between items-center mb-4\">\n                                <button class=\"p-2 hover:bg-gray-100 rounded\">\n                                    <i class=\"fas fa-chevron-left\"></i>\n                                </button>\n                                <div class=\"font-bold text-lg\">June 2023</div>\n                                <button class=\"p-2 hover:bg-gray-100 rounded\">\n                                    <i class=\"fas fa-chevron-right\"></i>\n                                </button>\n                            </div>\n                            <div class=\"grid grid-cols-7 gap-1 mb-2\">\n                                <div class=\"text-center text-gray-500 text-sm\">Sun</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Mon</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Tue</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Wed</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Thu</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Fri</div>\n                                <div class=\"text-center text-gray-500 text-sm\">Sat</div>\n                            </div>\n                            <div class=\"grid grid-cols-7 gap-1\">\n                                ${Array.from({length: 35}, (_, i) => \n                                    `<div class=\"h-12 border rounded hover:bg-gray-100 flex items-center justify-center text-sm ${i < 4 || i > 34 ? 'text-gray-300' : ''} ${i === 15 ? 'bg-blue-100' : ''}\">${i < 4 ? 28 + i : i < 34 ? i - 3 : i - 34}</div>`\n                                ).join('')}\n                            </div>\n                            <div class=\"mt-4\">\n                                <div class=\"font-semibold mb-2\">Today</div>\n                                <div class=\"bg-blue-50 p-3 rounded-lg\">\n                                    <div class=\"font-medium\">Team Meeting</div>\n                                    <div class=\"text-sm text-gray-600\">10:30 AM - 11:30 AM</div>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    break;\n            }\n            \n            header.appendChild(controls);\n            header.appendChild(title);\n            \n            const resizeHandle = document.createElement('div');\n            resizeHandle.className = 'resize-handle';\n            \n            windowDiv.appendChild(header);\n            windowDiv.appendChild(content);\n            windowDiv.appendChild(resizeHandle);\n            \n            // Make window draggable\n            header.addEventListener('mousedown', (e) => {\n                if (e.target.classList.contains('window-control')) return;\n                isDragging = true;\n                activeWindow = window;\n                dragOffsetX = e.clientX - windowDiv.offsetLeft;\n                dragOffsetY = e.clientY - windowDiv.offsetTop;\n                bringToFront(window);\n            });\n            \n            // Make window resizable\n            resizeHandle.addEventListener('mousedown', (e) => {\n                isResizing = true;\n                activeWindow = window;\n                e.stopPropagation();\n            });\n            \n            return {\n                element: windowDiv,\n                app: appName,\n                space: currentSpace,\n                minimized: false\n            };\n        }\n        \n        // Window management functions\n        function bringToFront(window) {\n            const allWindows = document.querySelectorAll('.window');\n            allWindows.forEach(w => w.style.zIndex = 10);\n            window.element.style.zIndex = 20;\n        }\n        \n        function closeWindow(window) {\n            const index = windows.indexOf(window);\n            if (index > -1) {\n                windows.splice(index, 1);\n            }\n            window.element.remove();\n        }\n        \n        function minimizeWindow(window) {\n            window.minimized = true;\n            window.element.style.display = 'none';\n        }\n        \n        function maximizeWindow(window) {\n            window.element.style.left = '0';\n            window.element.style.top = '32px';\n            window.element.style.width = '100%';\n            window.element.style.height = 'calc(100% - 32px)';\n        }\n        \n        // Initialize window drag/resize handlers\n        function initializeWindows() {\n            document.addEventListener('mousemove', (e) => {\n                if (isDragging && activeWindow) {\n                    const windowDiv = activeWindow.element;\n                    windowDiv.style.left = `${e.clientX - dragOffsetX}px`;\n                    windowDiv.style.top = `${e.clientY - dragOffsetY}px`;\n                }\n                \n                if (isResizing && activeWindow) {\n                    const windowDiv = activeWindow.element;\n                    const newWidth = e.clientX - windowDiv.offsetLeft;\n                    const newHeight = e.clientY - windowDiv.offsetTop;\n                    \n                    if (newWidth > 300) windowDiv.style.width = `${newWidth}px`;\n                    if (newHeight > 200) windowDiv.style.height = `${newHeight}px`;\n                }\n            });\n            \n            document.addEventListener('mouseup', () => {\n                isDragging = false;\n                isResizing = false;\n            });\n        }\n        \n        // Initialize menu bar\n        function initializeMenu() {\n            // Menu dropdowns could be implemented here\n        }\n        \n        // Initialize Spotlight\n        function initializeSpotlight() {\n            const spotlightToggle = document.getElementById('spotlight-toggle');\n            const spotlight = document.getElementById('spotlight');\n            const spotlightInput = document.getElementById('spotlight-input');\n            \n            spotlightToggle.addEventListener('click', () => {\n                spotlight.classList.toggle('hidden');\n                spotlightInput.focus();\n            });\n            \n            document.addEventListener('keydown', (e) => {\n                if (e.key === 'Escape') {\n                    spotlight.classList.add('hidden');\n                }\n            });\n        }\n        \n        // Initialize Notification Center\n        function initializeNotificationCenter() {\n            const notificationToggle = document.getElementById('notification-center-toggle');\n            const notificationCenter = document.getElementById('notification-center');\n            const clearNotifications = document.getElementById('clear-notifications');\n            \n            notificationToggle.addEventListener('click', () => {\n                notificationCenter.style.transform = notificationCenter.style.transform === 'translateX(0)' ? 'translateX(100%)' : 'translateX(0)';\n            });\n            \n            clearNotifications.addEventListener('click', () => {\n                const notifications = notificationCenter.querySelectorAll('.bg-black\\\\/30');\n                notifications.forEach(n => n.remove());\n            });\n        }\n        \n        // Initialize Mission Control\n        function initializeMissionControl() {\n            const missionControl = document.getElementById('mission-control');\n            const closeMissionControl = document.getElementById('close-mission-control');\n            const missionControlWindows = document.querySelectorAll('.mission-control-window');\n            \n            // Open Mission Control with trackpad gesture (3 fingers swipe up)\n            document.addEventListener('keydown', (e) => {\n                if (e.key === 'F3' || (e.ctrlKey && e.key === 'ArrowUp')) {\n                    missionControl.classList.remove('hidden');\n                }\n            });\n            \n            closeMissionControl.addEventListener('click', () => {\n                missionControl.classList.add('hidden');\n            });\n            \n            missionControlWindows.forEach(window => {\n                window.addEventListener('click', () => {\n                    const space = window.dataset.space;\n                    switchToSpace(parseInt(space));\n                    missionControl.classList.add('hidden');\n                });\n            });\n        }\n        \n        // Initialize Spaces (Desktops)\n        function initializeSpaces() {\n            // Switch spaces with trackpad gesture (3 or 4 fingers swipe)\n            document.addEventListener('keydown', (e) => {\n                if (e.ctrlKey && e.key === 'ArrowRight') {\n                    switchToSpace(Math.min(3, currentSpace + 1));\n                } else if (e.ctrlKey && e.key === 'ArrowLeft') {\n                    switchToSpace(Math.max(1, currentSpace - 1));\n                }\n            });\n        }\n        \n        function switchToSpace(spaceNumber) {\n            // Hide current space\n            document.getElementById(`space-${currentSpace}`).classList.remove('active');\n            \n            // Hide windows in current space\n            windows.filter(w => w.space === currentSpace).forEach(w => {\n                w.element.style.display = 'none';\n            });\n            \n            // Show new space\n            currentSpace = spaceNumber;\n            document.getElementById(`space-${currentSpace}`).classList.add('active');\n            \n            // Show windows in new space\n            windows.filter(w => w.space === currentSpace && !w.minimized).forEach(w => {\n                w.element.style.display = 'block';\n            });\n        }\n        \n        // Update time in menu bar\n        function updateTime() {\n            const now = new Date();\n            const hours = now.getHours();\n            const minutes = now.getMinutes();\n            const ampm = hours >= 12 ? 'PM' : 'AM';\n            const formattedHours = hours % 12 || 12;\n            const formattedMinutes = minutes.toString().padStart(2, '0');\n            \n            document.getElementById('date-time').textContent = `${formattedHours}:${formattedMinutes} ${ampm}`;\n        }\n    </script>\n</body>\n</html>"
}