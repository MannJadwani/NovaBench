{
  "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Web GTA - 3D City Adventure</title>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <style>\n        body {\n            margin: 0;\n            padding: 0;\n            overflow: hidden;\n            font-family: Arial, sans-serif;\n        }\n        #gameContainer {\n            position: relative;\n            width: 100vw;\n            height: 100vh;\n        }\n        #minimap {\n            position: absolute;\n            bottom: 20px;\n            right: 20px;\n            width: 200px;\n            height: 200px;\n            background: rgba(0, 0, 0, 0.8);\n            border: 2px solid white;\n            z-index: 1000;\n        }\n        #hud {\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            color: white;\n            z-index: 1000;\n            font-size: 18px;\n        }\n        #missionPanel {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 15px;\n            border-radius: 5px;\n            z-index: 1000;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"gameContainer\">\n        <div id=\"hud\">\n            <div>Health: <span id=\"health\">100</span></div>\n            <div>Vehicle: <span id=\"vehicleStatus\">None</span></div>\n        </div>\n        <div id=\"missionPanel\">\n            <div class=\"mb-2 font-bold\">Mission</div>\n            <div id=\"missionText\">Go to the waypoint!</div>\n        </div>\n        <canvas id=\"gameCanvas\"></canvas>\n        <div id=\"minimap\"></div>\n    </div>\n\n    <script>\n        class WebGTA {\n            constructor() {\n                this.scene = null;\n                this.camera = null;\n                this.renderer = null;\n                this.player = null;\n                this.vehicles = [];\n                this.currentVehicle = null;\n                this.missionMarker = null;\n                this.waypointReached = false;\n                \n                this.keys = {};\n                this.speed = 0.1;\n                this.turnSpeed = 0.05;\n                this.vehicleSpeed = 0.5;\n                this.vehicleTurnSpeed = 0.02;\n                \n                this.init();\n            }\n\n            init() {\n                this.setupScene();\n                this.createCity();\n                this.createPlayer();\n                this.createVehicles();\n                this.createMissionMarker();\n                this.setupEventListeners();\n                this.animate();\n            }\n\n            setupScene() {\n                this.scene = new THREE.Scene();\n                this.scene.fog = new THREE.Fog(0x87CEEB, 50, 200);\n                \n                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n                this.camera.position.set(0, 10, 20);\n                \n                this.renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('gameCanvas'), antialias: true });\n                this.renderer.setSize(window.innerWidth, window.innerHeight);\n                this.renderer.setClearColor(0x87CEEB);\n                \n                const ambientLight = new THREE.AmbientLight(0x404040);\n                this.scene.add(ambientLight);\n                \n                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n                directionalLight.position.set(50, 100, 50);\n                this.scene.add(directionalLight);\n            }\n\n            createCity() {\n                const roadMaterial = new THREE.MeshLambertMaterial({ color: 0x4D4D4D });\n                const sidewalkMaterial = new THREE.MeshLambertMaterial({ color: 0x808080 });\n                const buildingMaterial = new THREE.MeshLambertMaterial({ color: 0xB3B3B3 });\n                \n                // Create a simple grid of roads and buildings\n                for (let i = -20; i < 20; i += 10) {\n                    for (let j = -20; j < 20; j += 10) {\n                        // Sidewalks\n                        const sidewalkGeometry = new THREE.BoxGeometry(12, 0.2, 12);\n                        const sidewalk = new THREE.Mesh(sidewalkGeometry, sidewalkMaterial);\n                        sidewalk.position.set(i, -0.1, j);\n                        this.scene.add(sidewalk);\n                        \n                        // Buildings\n                        const buildingGeometry = new THREE.BoxGeometry(8, 10, 8);\n                        const building = new THREE.Mesh(buildingGeometry, buildingMaterial);\n                        building.position.set(i, 5, j);\n                        this.scene.add(building);\n                        \n                        // Roads (alternating pattern)\n                        if ((i + j) % 20 === 0) {\n                            const roadGeometry = new THREE.PlaneGeometry(10, 10);\n                            const road = new THREE.Mesh(roadGeometry, roadMaterial);\n                            road.rotation.x = -Math.PI / 2;\n                            road.position.set(i + 5, 0, j + 5);\n                            this.scene.add(road);\n                        }\n                    }\n                }\n                \n                // Central park area\n                const parkGeometry = new THREE.PlaneGeometry(40, 40);\n                const parkMaterial = new THREE.MeshLambertMaterial({ color: 0x228B22 });\n                const park = new THREE.Mesh(parkGeometry, parkMaterial);\n                park.rotation.x = -Math.PI / 2;\n                park.position.set(0, 0.1, 0);\n                this.scene.add(park);\n            }\n\n            createPlayer() {\n                const playerGeometry = new THREE.BoxGeometry(1, 2, 1);\n                const playerMaterial = new THREE.MeshLambertMaterial({ color: 0x0066FF });\n                this.player = new THREE.Mesh(playerGeometry, playerMaterial);\n                this.player.position.set(0, 1, 0);\n                this.scene.add(this.player);\n            }\n\n            createVehicles() {\n                const vehicleColors = [0xFF0000, 0x00FF00, 0x0000FF, 0xFFFF00, 0xFF00FF];\n                \n                for (let i = 0; i < 5; i++) {\n                    const vehicleGeometry = new THREE.BoxGeometry(3, 1.5, 2);\n                    const vehicleMaterial = new THREE.MeshLambertMaterial({ \n                        color: vehicleColors[i % vehicleColors.length] \n                    });\n                    const vehicle = {\n                        mesh: new THREE.Mesh(vehicleGeometry, vehicleMaterial),\n                        velocity: new THREE.Vector3(),\n                        acceleration: 0,\n                        turnSpeed: 0\n                    };\n                    \n                    vehicle.mesh.position.set(\n                        (Math.random() - 0.5) * 40,\n                        0.75,\n                        (Math.random() - 0.5) * 40\n                    );\n                    vehicle.mesh.rotation.y = Math.random() * Math.PI * 2;\n                    \n                    this.vehicles.push(vehicle);\n                    this.scene.add(vehicle.mesh);\n                }\n            }\n\n            createMissionMarker() {\n                const missionGeometry = new THREE.ConeGeometry(2, 4, 8);\n                const missionMaterial = new THREE.MeshLambertMaterial({ \n                    color: 0xFF0000,\n                    opacity: 0.7,\n                    transparent: true\n                });\n                this.missionMarker = new THREE.Mesh(missionGeometry, missionMaterial);\n                this.missionMarker.position.set(15, 0.1, 15);\n                this.missionMarker.rotation.x = -Math.PI / 2;\n                this.scene.add(this.missionMarker);\n            }\n\n            setupEventListeners() {\n                window.addEventListener('keydown', (e) => {\n                    this.keys[e.key.toLowerCase()] = true;\n                    \n                    // Enter vehicle\n                    if (e.key.toLowerCase() === 'e') {\n                        this.enterNearestVehicle();\n                    }\n                });\n                \n                window.addEventListener('keyup', (e) => {\n                    this.keys[e.key.toLowerCase()] = false;\n                });\n                \n                window.addEventListener('resize', () => {\n                    this.camera.aspect = window.innerWidth / window.innerHeight;\n                    this.camera.updateProjectionMatrix();\n                    this.renderer.setSize(window.innerWidth, window.innerHeight);\n                });\n            }\n\n            enterNearestVehicle() {\n                if (this.currentVehicle) return;\n                \n                const playerPos = this.player.position.clone();\n                const nearbyVehicle = this.vehicles.find(vehicle => {\n                    const distance = vehicle.mesh.position.distanceTo(playerPos);\n                    return distance < 3;\n                });\n                \n                if (nearbyVehicle) {\n                    this.currentVehicle = nearbyVehicle;\n                    this.scene.remove(this.player);\n                    document.getElementById('vehicleStatus').textContent = 'Driving';\n                }\n            }\n\n            updateMiniMap() {\n                const minimap = document.getElementById('minimap');\n                minimap.innerHTML = '';\n                \n                const canvas = document.createElement('canvas');\n                canvas.width = 200;\n                canvas.height = 200;\n                const ctx = canvas.getContext('2d');\n                \n                ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n                ctx.fillRect(0, 0, 200, 200);\n                \n                // Draw map elements\n                const scale = 10;\n                const offsetX = 100;\n                const offsetY = 100;\n                \n                // Player/vehicle position\n                const pos = this.currentVehicle ? this.currentVehicle.mesh.position : this.player.position;\n                const x = offsetX + pos.x * scale;\n                const z = offsetY - pos.z * scale;\n                ctx.fillStyle = '#0066FF';\n                ctx.fillRect(x - 2, z - 2, 4, 4);\n                \n                // Mission marker\n                const markerX = offsetX + this.missionMarker.position.x * scale;\n                const markerZ = offsetY - this.missionMarker.position.z * scale;\n                ctx.fillStyle = '#FF0000';\n                ctx.fillRect(markerX - 3, markerZ - 3, 6, 6);\n                \n                // Draw roads\n                ctx.strokeStyle = '#4D4D4D';\n                ctx.lineWidth = 2;\n                for (let i = -20; i <= 20; i += 10) {\n                    ctx.beginPath();\n                    ctx.moveTo(offsetX + i * scale, 0);\n                    ctx.lineTo(offsetX + i * scale, 200);\n                    ctx.stroke();\n                    \n                    ctx.beginPath();\n                    ctx.moveTo(0, offsetY + i * scale);\n                    ctx.lineTo(200, offsetY + i * scale);\n                    ctx.stroke();\n                }\n                \n                minimap.appendChild(canvas);\n            }\n\n            checkWaypoint() {\n                const pos = this.currentVehicle ? this.currentVehicle.mesh.position : this.player.position;\n                const distance = pos.distanceTo(this.missionMarker.position);\n                \n                if (distance < 3 && !this.waypointReached) {\n                    this.waypointReached = true;\n                    this.missionMarker.material.color = new THREE.Color(0x00FF00);\n                    document.getElementById('missionText').textContent = 'Waypoint reached! Mission complete!';\n                }\n            }\n\n            updatePlayer() {\n                if (this.currentVehicle) return;\n                \n                if (this.keys['w']) {\n                    this.player.position.x -= Math.sin(this.player.rotation.y) * this.speed;\n                    this.player.position.z -= Math.cos(this.player.rotation.y) * this.speed;\n                }\n                if (this.keys['s']) {\n                    this.player.position.x += Math.sin(this.player.rotation.y) * this.speed;\n                    this.player.position.z += Math.cos(this.player.rotation.y) * this.speed;\n                }\n                if (this.keys['a']) {\n                    this.player.rotation.y += this.turnSpeed;\n                }\n                if (this.keys['d']) {\n                    this.player.rotation.y -= this.turnSpeed;\n                }\n            }\n\n            updateVehicle() {\n                if (!this.currentVehicle) return;\n                \n                const vehicle = this.currentVehicle;\n                \n                if (this.keys['w']) {\n                    vehicle.acceleration = this.vehicleSpeed;\n                } else if (this.keys['s']) {\n                    vehicle.acceleration = -this.vehicleSpeed;\n                } else {\n                    vehicle.acceleration *= 0.9; // Slow down gradually\n                }\n                \n                if (this.keys['a']) {\n                    vehicle.turnSpeed = this.vehicleTurnSpeed;\n                } else if (this.keys['d']) {\n                    vehicle.turnSpeed = -this.vehicleTurnSpeed;\n                } else {\n                    vehicle.turnSpeed = 0;\n                }\n                \n                vehicle.velocity.x -= Math.sin(vehicle.mesh.rotation.y) * vehicle.acceleration;\n                vehicle.velocity.z -= Math.cos(vehicle.mesh.rotation.y) * vehicle.acceleration;\n                \n                vehicle.mesh.rotation.y += vehicle.turnSpeed;\n                vehicle.mesh.position.add(vehicle.velocity);\n                vehicle.velocity.multiplyScalar(0.95); // Friction\n                \n                // Keep vehicle on roads (simple boundary check)\n                if (Math.abs(vehicle.mesh.position.x) > 25) {\n                    vehicle.mesh.position.x = Math.sign(vehicle.mesh.position.x) * 25;\n                    vehicle.velocity.x = -vehicle.velocity.x * 0.5;\n                }\n                if (Math.abs(vehicle.mesh.position.z) > 25) {\n                    vehicle.mesh.position.z = Math.sign(vehicle.mesh.position.z) * 25;\n                    vehicle.velocity.z = -vehicle.velocity.z * 0.5;\n                }\n                \n                // Simple collision with buildings (approximate)\n                if (Math.abs(vehicle.mesh.position.x) < 15 && Math.abs(vehicle.mesh.position.z) < 15) {\n                    vehicle.mesh.position.x += Math.sign(vehicle.mesh.position.x) * 0.1;\n                    vehicle.mesh.position.z += Math.sign(vehicle.mesh.position.z) * 0.1;\n                }\n            }\n\n            animate() {\n                requestAnimationFrame(() => this.animate());\n                \n                this.updatePlayer();\n                this.updateVehicle();\n                this.checkWaypoint();\n                this.updateMiniMap();\n                \n                if (this.currentVehicle) {\n                    this.camera.position.copy(this.currentVehicle.mesh.position);\n                    this.camera.position.y = 8;\n                    this.camera.lookAt(this.currentVehicle.mesh.position);\n                } else {\n                    this.camera.position.x = this.player.position.x - Math.sin(this.player.rotation.y) * 10;\n                    this.camera.position.y = 8;\n                    this.camera.position.z = this.player.position.z - Math.cos(this.player.rotation.y) * 10;\n                    this.camera.lookAt(this.player.position);\n                }\n                \n                this.renderer.render(this.scene, this.camera);\n            }\n        }\n\n        // Initialize the game when page loads\n        window.addEventListener('load', () => {\n            new WebGTA();\n        });\n    </script>\n</div>\n</body>\n</html>"
}